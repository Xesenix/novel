<xes-primary-layout>
	<h1 slot="title-bar">Story stages list</h1>
	<xes-menu slot="side-bar"></xes-menu>
	<ng-container slot="content">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h2>Add new story stage</h2>
			</div>
			<div class="panel-body">
				<xes-stage-form #addForm></xes-stage-form>

				<a class="btn btn-primary" (click)="add()">Add</a>
			</div>
		</div>
		<div class="panel panel-default">
			<div class="panel-heading">
				<h2>Story stages:</h2>
			</div>
			<div class="panel-body">
			</div>
			<ul class="list-group sortable" [dragula]="'stages'" data-label="drag&drop">
				<li class="list-group-item" *ngFor="let stage of stages | async; let $index = index">
					<xes-stage-list-item
						[stage]="stage"
						(updateSignal)="onStoryStageUpdate($index, $event)"
						(removeSignal)="onStoryStageRemove($index)"
					></xes-stage-list-item>
					<a class="handle glyphicon glyphicon-move"></a>
				</li>
			</ul>
		</div>
	</ng-container>
</xes-primary-layout>
